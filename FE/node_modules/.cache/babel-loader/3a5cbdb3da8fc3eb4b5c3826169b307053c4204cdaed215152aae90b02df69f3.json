{"ast":null,"code":"var _jsxFileName = \"/Users/hongdinh/Code/GitHub_Clone/nhom3_webdocsach/FE/src/views/Account/ChangePassword.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loginSuccess, logoutSuccess } from '../../redux/authSlice';\nimport Loading from '../../components/Loading';\nimport { toast } from 'react-toastify';\nimport { handleChangePassword } from '../../handle/handleAccount';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChangePassword() {\n  _s();\n  const loading = useSelector(state => state.message.loading);\n  const [currentPW, setCurrentPW] = useState(\"\");\n  const [newPW, setNewPW] = useState(\"\");\n  const [newCfPW, setNewCfPW] = useState(\"\");\n  const [msgNewPW, setMsgNewPW] = useState(\"\");\n  const [msgNewCfPW, setMsgCfNewPW] = useState(\"\");\n  const [valid, setValid] = useState({\n    new: false,\n    cf: false\n  });\n  const user = useSelector(state => {\n    var _state$auth$login;\n    return (_state$auth$login = state.auth.login) === null || _state$auth$login === void 0 ? void 0 : _state$auth$login.user;\n  });\n  const dispatch = useDispatch();\n  const strongRegex = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})\"); //regex kiểm tra mật khẩu hợp lệ\n\n  const onChangeCurrentPW = e => {\n    //xử lý khi nhập mật khẩu\n    setCurrentPW(e.target.value);\n  };\n  const onChangeNewPW = e => {\n    //xử lý khi nhập mật khẩu mới\n    setNewPW(e.target.value);\n    if (strongRegex.test(e.target.value)) {\n      setMsgNewPW(\"Mật khẩu hợp lý\");\n      setValid(pre => {\n        return {\n          ...pre,\n          new: true\n        };\n      });\n    } else {\n      setMsgNewPW(\"Mật khẩu phải có ít nhất 8 kí tự. Chứa kí tự thường, kí tự hoa và số\");\n      setValid(pre => {\n        return {\n          ...pre,\n          new: false\n        };\n      });\n    }\n  };\n  const onChangeNewCfPW = e => {\n    //xử lý nhập mật khẩu xác nhận\n    setNewCfPW(e.target.value);\n    if (newPW.localeCompare(e.target.value) == 0) {\n      setMsgCfNewPW(\"Trùng khớp\");\n      setValid(pre => {\n        return {\n          ...pre,\n          cf: true\n        };\n      });\n    } else {\n      setMsgCfNewPW(\"Mật khẩu không trùng khớp\");\n      setValid(pre => {\n        return {\n          ...pre,\n          cf: false\n        };\n      });\n    }\n  };\n\n  //handle\n\n  const onClickChangePassword = async e => {\n    //xử lý gọi API đổi mật khẩu\n    e.preventDefault();\n    if (valid.new && valid.cf) {\n      //kiểm tra dữ liệu đầu vào\n      const params = {\n        //payload\n        newPassword: newPW,\n        password: currentPW\n      };\n      handleChangePassword(user, dispatch, loginSuccess, params); //gọi hàm xử lý\n    }\n  };\n\n  //style\n  const labelStyle = {\n    'minWidth': '100px',\n    'display': 'inline-block'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile__main\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"\",\n          style: labelStyle,\n          children: \"M\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          onChange: onChangeCurrentPW,\n          value: currentPW\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"\",\n          style: labelStyle,\n          children: \"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          onChange: onChangeNewPW,\n          value: newPW\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: msgNewPW\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"\",\n          style: labelStyle,\n          children: \"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          onChange: onChangeNewCfPW,\n          id: \"birthday\",\n          value: newCfPW\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: msgNewCfPW\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClickChangePassword,\n          children: [loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 72\n          }, this) : '', \" \\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(ChangePassword, \"4/y7EjNe3GG5WhUn8cGyeK24a8c=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n_c = ChangePassword;\nexport default ChangePassword;\nvar _c;\n$RefreshReg$(_c, \"ChangePassword\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","loginSuccess","logoutSuccess","Loading","toast","handleChangePassword","jsxDEV","_jsxDEV","ChangePassword","_s","loading","state","message","currentPW","setCurrentPW","newPW","setNewPW","newCfPW","setNewCfPW","msgNewPW","setMsgNewPW","msgNewCfPW","setMsgCfNewPW","valid","setValid","new","cf","user","_state$auth$login","auth","login","dispatch","strongRegex","RegExp","onChangeCurrentPW","e","target","value","onChangeNewPW","test","pre","onChangeNewCfPW","localeCompare","onClickChangePassword","preventDefault","params","newPassword","password","labelStyle","className","children","htmlFor","style","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","id","onClick","_c","$RefreshReg$"],"sources":["/Users/hongdinh/Code/GitHub_Clone/nhom3_webdocsach/FE/src/views/Account/ChangePassword.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { loginSuccess, logoutSuccess } from '../../redux/authSlice'\r\nimport Loading from '../../components/Loading'\r\nimport { toast } from 'react-toastify'\r\nimport { handleChangePassword } from '../../handle/handleAccount'\r\n\r\nfunction ChangePassword() {\r\n    const loading = useSelector(state => state.message.loading)\r\n    const [currentPW, setCurrentPW] = useState(\"\")\r\n    const [newPW, setNewPW] = useState(\"\")\r\n    const [newCfPW, setNewCfPW] = useState(\"\")\r\n    const [msgNewPW, setMsgNewPW] = useState(\"\")\r\n    const [msgNewCfPW, setMsgCfNewPW] = useState(\"\")\r\n    const [valid, setValid] = useState({ new: false, cf: false });\r\n    const user = useSelector(state => state.auth.login?.user)\r\n    const dispatch = useDispatch();\r\n    const strongRegex = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})\");//regex kiểm tra mật khẩu hợp lệ\r\n\r\n    const onChangeCurrentPW = (e) => {//xử lý khi nhập mật khẩu\r\n        setCurrentPW(e.target.value)\r\n    }\r\n    const onChangeNewPW = (e) => {//xử lý khi nhập mật khẩu mới\r\n        setNewPW(e.target.value)\r\n        if (strongRegex.test(e.target.value)) {\r\n            setMsgNewPW(\"Mật khẩu hợp lý\")\r\n            setValid(pre => { return { ...pre, new: true } })\r\n        } else {\r\n            setMsgNewPW(\"Mật khẩu phải có ít nhất 8 kí tự. Chứa kí tự thường, kí tự hoa và số\")\r\n            setValid(pre => { return { ...pre, new: false } })\r\n        }\r\n    }\r\n    const onChangeNewCfPW = (e) => {//xử lý nhập mật khẩu xác nhận\r\n        setNewCfPW(e.target.value)\r\n        if (newPW.localeCompare(e.target.value) == 0) {\r\n            setMsgCfNewPW(\"Trùng khớp\")\r\n            setValid(pre => { return { ...pre, cf: true } })\r\n        }\r\n        else {\r\n            setMsgCfNewPW(\"Mật khẩu không trùng khớp\")\r\n            setValid(pre => { return { ...pre, cf: false } })\r\n        }\r\n    }\r\n\r\n    //handle\r\n\r\n    const onClickChangePassword = async (e) => {//xử lý gọi API đổi mật khẩu\r\n        e.preventDefault()\r\n        if (valid.new && valid.cf) {//kiểm tra dữ liệu đầu vào\r\n            const params = {//payload\r\n                newPassword: newPW,\r\n                password: currentPW\r\n            }\r\n            handleChangePassword(user,dispatch,loginSuccess,params);//gọi hàm xử lý\r\n        }\r\n    }\r\n\r\n    //style\r\n    const labelStyle = { 'minWidth': '100px', 'display': 'inline-block' }\r\n\r\n    return (\r\n        <div className=\"profile__main\">\r\n            <form>\r\n                <div className=\"group-info\">\r\n                    <label htmlFor=\"\" style={labelStyle}>Mật khẩu hiện tại</label>\r\n                    {<input type={\"password\"} onChange={onChangeCurrentPW} value={currentPW} />}\r\n                </div>\r\n                <div className=\"group-info\">\r\n                    <label htmlFor=\"\" style={labelStyle}>Mật khẩu mới</label>\r\n                    {<input type={\"password\"} onChange={onChangeNewPW} value={newPW}></input>}\r\n                    <span>{msgNewPW}</span>\r\n                </div>\r\n                <div className=\"group-info\">\r\n                    <label htmlFor=\"\" style={labelStyle}>Xác nhận mật khẩu mới</label>\r\n                    <input type={\"password\"} onChange={onChangeNewCfPW} id=\"birthday\" value={newCfPW}></input>\r\n                    <span>{msgNewCfPW}</span>\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                    <button onClick={onClickChangePassword}>{loading ? <Loading/> : ''} Đổi mật khẩu</button>\r\n                </div>\r\n            </form>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChangePassword"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}